---
layout: post
title: é…ç½®ç»„ä»¶çš„ props
description: React.js å°ä¹¦æ˜¯ä¸€ä¸ªå¼€æºã€å…è´¹ã€ä¸“ä¸šã€ç®€å•çš„ React.js æ•™ç¨‹ã€‚ä¸åŒçš„åœºæ™¯ä¸‹å¯¹ç»„ä»¶çš„éœ€æ±‚å¯èƒ½ä¼šæœ‰æ‰€ä¸åŒï¼Œprops å¯ä»¥å¸®åŠ©æˆ‘ä»¬è¾¾åˆ°è¿™ä¸ªæ•ˆæœã€‚æœ¬æ–‡ä»‹ç»é…ç½®ç»„ä»¶ props çš„ç”¨æ³•ã€‚ 
tags: [React.js,React.js å°ä¹¦,æ•™ç¨‹,props,ç»„ä»¶]
---

<ul style='font-size: 14px;'>
  <li>
    ä½œè€…ï¼š<a href="https://www.zhihu.com/people/hu-zi-da-ha" target="_blank">èƒ¡å­å¤§å“ˆ</a>
  </li>
  <li>
    åŸæ–‡é“¾æ¥ï¼š<a href="http://huziketang.com/books/react{{ page.url }}"> http://huziketang.com/books/react{{ page.url }} </a>
  </li>
  <li>è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼Œä¿ç•™åŸæ–‡é“¾æ¥å’Œä½œè€…ä¿¡æ¯ã€‚</li>
</ul>

{% raw  %}
ç»„ä»¶æ˜¯ç›¸äº’ç‹¬ç«‹ã€å¯å¤ç”¨çš„å•å…ƒï¼Œä¸€ä¸ªç»„ä»¶å¯èƒ½åœ¨ä¸åŒåœ°æ–¹è¢«ç”¨åˆ°ã€‚ä½†æ˜¯åœ¨ä¸åŒçš„åœºæ™¯ä¸‹å¯¹è¿™ä¸ªç»„ä»¶çš„éœ€æ±‚å¯èƒ½ä¼šæ ¹æ®æƒ…å†µæœ‰æ‰€ä¸åŒï¼Œä¾‹å¦‚ä¸€ä¸ªç‚¹èµæŒ‰é’®ç»„ä»¶ï¼Œåœ¨æˆ‘è¿™é‡Œéœ€è¦å®ƒæ˜¾ç¤ºçš„æ–‡æœ¬æ˜¯â€œç‚¹èµâ€å’Œâ€œå–æ¶ˆâ€ï¼Œå½“åˆ«çš„åŒäº‹æ‹¿è¿‡å»ç”¨çš„æ—¶å€™ï¼Œå´éœ€è¦å®ƒæ˜¾ç¤ºâ€œèµâ€å’Œâ€œå·²èµâ€ã€‚å¦‚ä½•è®©ç»„ä»¶èƒ½é€‚åº”ä¸åŒåœºæ™¯ä¸‹çš„éœ€æ±‚ï¼Œæˆ‘ä»¬å°±è¦è®©ç»„ä»¶å…·æœ‰ä¸€å®šçš„â€œå¯é…ç½®â€æ€§ã€‚

 React.js çš„ `props` å°±å¯ä»¥å¸®åŠ©æˆ‘ä»¬è¾¾åˆ°è¿™ä¸ªæ•ˆæœã€‚æ¯ä¸ªç»„ä»¶éƒ½å¯ä»¥æ¥å—ä¸€ä¸ª `props` å‚æ•°ï¼Œå®ƒæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«äº†æ‰€æœ‰ä½ å¯¹è¿™ä¸ªç»„ä»¶çš„é…ç½®ã€‚å°±æ‹¿æˆ‘ä»¬ç‚¹èµæŒ‰é’®åšä¾‹å­ï¼š

<a href="http://huzidaha.github.io/static/assets/img/posts/B7575C67-64F8-4A13-9C63-4D6805FA360D.png" target="_blank">![React.js å°ä¹¦æ•™ç¨‹å›¾ç‰‡](http://huzidaha.github.io/static/assets/img/posts/B7575C67-64F8-4A13-9C63-4D6805FA360D.png)</a>

ä¸‹é¢çš„ä»£ç å¯ä»¥è®©å®ƒè¾¾åˆ°ä¸Šè¿°çš„å¯é…ç½®æ€§ï¼š

```javascript
class LikeButton extends Component {
  constructor () {
    super()
    this.state = { isLiked: false }
  }

  handleClickOnLikeButton () {
    this.setState({
      isLiked: !this.state.isLiked
    })
  }

  render () {
    const likedText = this.props.likedText || 'å–æ¶ˆ'
    const unlikedText = this.props.unlikedText || 'ç‚¹èµ'
    return (
      <button onClick={this.handleClickOnLikeButton.bind(this)}>
        {this.state.isLiked ? likedText : unlikedText} ğŸ‘
      </button>
    )
  }
}
```

ä»  `render` å‡½æ•°å¯ä»¥çœ‹å‡ºæ¥ï¼Œç»„ä»¶å†…éƒ¨æ˜¯é€šè¿‡ `this.props`  çš„æ–¹å¼è·å–åˆ°ç»„ä»¶çš„å‚æ•°çš„ï¼Œå¦‚æœ `this.props` é‡Œé¢æœ‰éœ€è¦çš„å±æ€§æˆ‘ä»¬å°±é‡‡ç”¨ç›¸åº”çš„å±æ€§ï¼Œæ²¡æœ‰çš„è¯å°±ç”¨é»˜è®¤çš„å±æ€§ã€‚

é‚£ä¹ˆæ€ä¹ˆæŠŠ `props` ä¼ è¿›å»å‘¢ï¼Ÿ*åœ¨ä½¿ç”¨ä¸€ä¸ªç»„ä»¶çš„æ—¶å€™ï¼Œå¯ä»¥æŠŠå‚æ•°æ”¾åœ¨æ ‡ç­¾çš„å±æ€§å½“ä¸­ï¼Œæ‰€æœ‰çš„å±æ€§éƒ½ä¼šä½œä¸º `props` å¯¹è±¡çš„é”®å€¼*ï¼š

```javascript
class Index extends Component {
  render () {
    return (
      <div>
        <LikeButton likedText='å·²èµ' unlikedText='èµ' />
      </div>
    )
  }
}
```

å°±åƒä½ åœ¨ç”¨æ™®é€šçš„ HTML æ ‡ç­¾çš„å±æ€§ä¸€æ ·ï¼Œå¯ä»¥æŠŠå‚æ•°æ”¾åœ¨è¡¨ç¤ºç»„ä»¶çš„æ ‡ç­¾ä¸Šï¼Œç»„ä»¶å†…éƒ¨å°±å¯ä»¥é€šè¿‡ `this.props` æ¥è®¿é—®åˆ°è¿™äº›é…ç½®å‚æ•°äº†ã€‚

<a href="http://huzidaha.github.io/static/assets/img/posts/1D4C87F2-9B05-47CE-8144-1154B5CB1FC3.png" target="_blank">![React.js å°ä¹¦æ•™ç¨‹å›¾ç‰‡](http://huzidaha.github.io/static/assets/img/posts/1D4C87F2-9B05-47CE-8144-1154B5CB1FC3.png)</a>

å‰é¢çš„ç« èŠ‚æˆ‘ä»¬è¯´è¿‡ï¼ŒJSX çš„è¡¨è¾¾å¼æ’å…¥å¯ä»¥åœ¨æ ‡ç­¾å±æ€§ä¸Šä½¿ç”¨ã€‚æ‰€ä»¥å…¶å®å¯ä»¥æŠŠä»»ä½•ç±»å‹çš„æ•°æ®ä½œä¸ºç»„ä»¶çš„å‚æ•°ï¼ŒåŒ…æ‹¬å­—ç¬¦ä¸²ã€æ•°å­—ã€å¯¹è±¡ã€æ•°ç»„ã€ç”šè‡³æ˜¯å‡½æ•°ç­‰ç­‰ã€‚ä¾‹å¦‚ç°åœ¨æˆ‘ä»¬æŠŠä¸€ä¸ªå¯¹è±¡ä¼ ç»™ç‚¹èµç»„ä»¶ä½œä¸ºå‚æ•°ï¼š

```javascript
class Index extends Component {
  render () {
    return (
      <div>
        <LikeButton wordings={{likedText: 'å·²èµ', unlikedText: 'èµ'}} />
      </div>
    )
  }
}
```

ç°åœ¨æˆ‘ä»¬æŠŠ `likedText` å’Œ `unlikedText` è¿™ä¸¤ä¸ªå‚æ•°å°è£…åˆ°ä¸€ä¸ªå« `wordings` çš„å¯¹è±¡å‚æ•°å†…ï¼Œç„¶åä¼ å…¥ç‚¹èµç»„ä»¶ä¸­ã€‚å¤§å®¶çœ‹åˆ° `{{likedText: 'å·²èµ', unlikedText: 'èµ'}}` è¿™æ ·çš„ä»£ç çš„æ—¶å€™ï¼Œä¸è¦ä»¥ä¸ºæ˜¯ä»€ä¹ˆæ–°è¯­æ³•ã€‚ä¹‹å‰è®¨è®ºè¿‡ï¼ŒJSX çš„ `{}` å†…å¯ä»¥åµŒå…¥ä»»ä½•è¡¨è¾¾å¼ï¼Œ`{{}}` å°±æ˜¯åœ¨ `{}` å†…éƒ¨ç”¨å¯¹è±¡å­—é¢é‡è¿”å›ä¸€ä¸ªå¯¹è±¡è€Œå·²ã€‚

è¿™æ—¶å€™ï¼Œç‚¹èµæŒ‰é’®çš„å†…éƒ¨å°±è¦ç”¨ `this.props.wordings` æ¥è·å–åˆ°åˆ°å‚æ•°äº†ï¼š

```javascript
class LikeButton extends Component {
  constructor () {
    super()
    this.state = { isLiked: false }
  }

  handleClickOnLikeButton () {
    this.setState({
      isLiked: !this.state.isLiked
    })
  }

  render () {
    const wordings = this.props.wordings || {
      likedText: 'å–æ¶ˆ',
      unlikedText: 'ç‚¹èµ'
    }
    return (
      <button onClick={this.handleClickOnLikeButton.bind(this)}>
        {this.state.isLiked ? wordings.likedText : wordings.unlikedText} ğŸ‘
      </button>
    )
  }
}
```

ç”šè‡³å¯ä»¥å¾€ç»„ä»¶å†…éƒ¨ä¼ å…¥å‡½æ•°ä½œä¸ºå‚æ•°ï¼š

```javascript
class Index extends Component {
  render () {
    return (
      <div>
        <LikeButton
          wordings={{likedText: 'å·²èµ', unlikedText: 'èµ'}}
          onClick={() => console.log('Click on like button!')}/>
      </div>
    )
  }
}
```

è¿™æ ·å¯ä»¥é€šè¿‡ `this.props.onClick` è·å–åˆ°è¿™ä¸ªä¼ è¿›å»çš„å‡½æ•°ï¼Œä¿®æ”¹ `LikeButton ` çš„ `handleClickOnLikeButton` æ–¹æ³•ï¼š

```javascript
...
  handleClickOnLikeButton () {
    this.setState({
      isLiked: !this.state.isLiked
    })
    if (this.props.onClick) {
      this.props.onClick()
    }
  }
...
```

å½“æ¯æ¬¡ç‚¹å‡»æŒ‰é’®çš„æ—¶å€™ï¼Œæ§åˆ¶å°ä¼šæ˜¾ç¤º `Click on like button!` ã€‚ä½†è¿™ä¸ªè¡Œä¸ºä¸æ˜¯ç‚¹èµç»„ä»¶è‡ªå·±å®ç°çš„ï¼Œè€Œæ˜¯æˆ‘ä»¬ä¼ è¿›å»çš„ã€‚æ‰€ä»¥ï¼Œä¸€ä¸ªç»„ä»¶çš„è¡Œä¸ºã€æ˜¾ç¤ºå½¢æ€éƒ½å¯ä»¥ç”¨ `props` æ¥æ§åˆ¶ï¼Œå°±å¯ä»¥è¾¾åˆ°å¾ˆå¥½çš„å¯é…ç½®æ€§ã€‚

## é»˜è®¤é…ç½® defaultProps
ä¸Šé¢çš„ç»„ä»¶é»˜è®¤é…ç½®æˆ‘ä»¬æ˜¯é€šè¿‡ `||` æ“ä½œç¬¦æ¥å®ç°ã€‚è¿™ç§éœ€è¦é»˜è®¤é…ç½®çš„æƒ…å†µåœ¨ React.js ä¸­éå¸¸å¸¸è§ï¼Œæ‰€ä»¥ React.js ä¹Ÿæä¾›äº†ä¸€ç§æ–¹å¼ `defaultProps`ï¼Œå¯ä»¥æ–¹ä¾¿çš„åšåˆ°é»˜è®¤é…ç½®ã€‚

```javascript
class LikeButton extends Component {
  static defaultProps = {
    likedText: 'å–æ¶ˆ',
    unlikedText: 'ç‚¹èµ'
  }

  constructor () {
    super()
    this.state = { isLiked: false }
  }

  handleClickOnLikeButton () {
    this.setState({
      isLiked: !this.state.isLiked
    })
  }

  render () {
    return (
      <button onClick={this.handleClickOnLikeButton.bind(this)}>
        {this.state.isLiked
          ? this.props.likedText
          : this.props.unlikedText} ğŸ‘
      </button>
    )
  }
}
```

æ³¨æ„ï¼Œæˆ‘ä»¬ç»™ç‚¹èµç»„ä»¶åŠ ä¸Šäº†ä»¥ä¸‹çš„ä»£ç ï¼š

```javascript
  static defaultProps = {
    likedText: 'å–æ¶ˆ',
    unlikedText: 'ç‚¹èµ'
  }
```

`defaultProps` ä½œä¸ºç‚¹èµæŒ‰é’®ç»„ä»¶çš„ç±»å±æ€§ï¼Œé‡Œé¢æ˜¯å¯¹ `props` ä¸­å„ä¸ªå±æ€§çš„é»˜è®¤é…ç½®ã€‚è¿™æ ·æˆ‘ä»¬å°±ä¸éœ€è¦åˆ¤æ–­é…ç½®å±æ€§æ˜¯å¦ä¼ è¿›æ¥äº†ï¼šå¦‚æœæ²¡æœ‰ä¼ è¿›æ¥ï¼Œä¼šç›´æ¥ä½¿ç”¨ `defaultProps` ä¸­çš„é»˜è®¤å±æ€§ã€‚ æ‰€ä»¥å¯ä»¥çœ‹åˆ°ï¼Œåœ¨ `render` å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬ä¼šç›´æ¥ä½¿ç”¨ `this.props` è€Œä¸éœ€è¦å†åšåˆ¤æ–­ã€‚

## props ä¸å¯å˜
`props` ä¸€æ—¦ä¼ å…¥è¿›æ¥å°±ä¸èƒ½æ”¹å˜ã€‚ä¿®æ”¹ä¸Šé¢çš„ä¾‹å­ä¸­çš„ `handleClickOnLikeButton` ï¼š

```javascript
...
  handleClickOnLikeButton () {
    this.props.likedText = 'å–æ¶ˆ'
    this.setState({
      isLiked: !this.state.isLiked
    })
  }
...
```

æˆ‘ä»¬å°è¯•åœ¨ç”¨æˆ·ç‚¹å‡»æŒ‰é’®çš„æ—¶å€™æ”¹å˜ `this.props.likedText` ï¼Œç„¶åä½ ä¼šçœ‹åˆ°æ§åˆ¶å°æŠ¥é”™äº†ï¼š

<a href="http://huzidaha.github.io/static/assets/img/posts/F170536D-CD3B-4828-B73E-33DC883A8E99.png" target="_blank">![React.js å°ä¹¦æ•™ç¨‹å›¾ç‰‡](http://huzidaha.github.io/static/assets/img/posts/F170536D-CD3B-4828-B73E-33DC883A8E99.png)</a>

ä½ ä¸èƒ½æ”¹å˜ä¸€ä¸ªç»„ä»¶è¢«æ¸²æŸ“çš„æ—¶å€™ä¼ è¿›æ¥çš„ `props`ã€‚React.js  å¸Œæœ›ä¸€ä¸ªç»„ä»¶åœ¨è¾“å…¥ç¡®å®šçš„ `props` çš„æ—¶å€™ï¼Œèƒ½å¤Ÿè¾“å‡ºç¡®å®šçš„ UI æ˜¾ç¤ºå½¢æ€ã€‚å¦‚æœ `props` æ¸²æŸ“è¿‡ç¨‹ä¸­å¯ä»¥è¢«ä¿®æ”¹ï¼Œé‚£ä¹ˆå°±ä¼šå¯¼è‡´è¿™ä¸ªç»„ä»¶æ˜¾ç¤ºå½¢æ€å’Œè¡Œä¸ºå˜å¾—ä¸å¯é¢„æµ‹ï¼Œè¿™æ ·ä¼šå¯èƒ½ä¼šç»™ç»„ä»¶ä½¿ç”¨è€…å¸¦æ¥å›°æƒ‘ã€‚

ä½†è¿™å¹¶ä¸æ„å‘³ç€ç”± `props` å†³å®šçš„æ˜¾ç¤ºå½¢æ€ä¸èƒ½è¢«ä¿®æ”¹ã€‚ç»„ä»¶çš„ä½¿ç”¨è€…å¯ä»¥*ä¸»åŠ¨åœ°é€šè¿‡é‡æ–°æ¸²æŸ“çš„æ–¹å¼*æŠŠæ–°çš„ `props` ä¼ å…¥ç»„ä»¶å½“ä¸­ï¼Œè¿™æ ·è¿™ä¸ªç»„ä»¶ä¸­ç”± `props` å†³å®šçš„æ˜¾ç¤ºå½¢æ€ä¹Ÿä¼šå¾—åˆ°ç›¸åº”çš„æ”¹å˜ã€‚

ä¿®æ”¹ä¸Šé¢çš„ä¾‹å­çš„ `Index` ç»„ä»¶ï¼š

```javascript
class Index extends Component {
  constructor () {
    super()
    this.state = {
      likedText: 'å·²èµ',
      unlikedText: 'èµ'
    }
  }

  handleClickOnChange () {
    this.setState({
      likedText: 'å–æ¶ˆ',
      unlikedText: 'ç‚¹èµ'
    })
  }

  render () {
    return (
      <div>
        <LikeButton
          likedText={this.state.likedText}
          unlikedText={this.state.unlikedText} />
        <div>
          <button onClick={this.handleClickOnChange.bind(this)}>
            ä¿®æ”¹ wordings
          </button>
        </div>
      </div>
    )
  }
}
```

åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬æŠŠ `Index` çš„ `state` ä¸­çš„ `likedText` å’Œ `unlikedText` ä¼ ç»™ `LikeButton` ã€‚`Index` è¿˜æœ‰å¦å¤–ä¸€ä¸ªæŒ‰é’®ï¼Œç‚¹å‡»è¿™ä¸ªæŒ‰é’®ä¼šé€šè¿‡ `setState` ä¿®æ”¹ `Index` çš„ `state` ä¸­çš„ä¸¤ä¸ªå±æ€§ã€‚

ç”±äº `setState` ä¼šå¯¼è‡´ `Index` é‡æ–°æ¸²æŸ“ï¼Œæ‰€ä»¥ `LikedButton` ä¼šæ¥æ”¶åˆ°æ–°çš„ `props`ï¼Œå¹¶ä¸”é‡æ–°æ¸²æŸ“ï¼Œäºæ˜¯å®ƒçš„æ˜¾ç¤ºå½¢æ€ä¹Ÿä¼šå¾—åˆ°æ›´æ–°ã€‚è¿™å°±æ˜¯é€šè¿‡é‡æ–°æ¸²æŸ“çš„æ–¹å¼æ¥ä¼ å…¥æ–°çš„ `props` ä»è€Œè¾¾åˆ°ä¿®æ”¹ `LikedButton` æ˜¾ç¤ºå½¢æ€çš„æ•ˆæœã€‚

## æ€»ç»“
1. ä¸ºäº†ä½¿å¾—ç»„ä»¶çš„å¯å®šåˆ¶æ€§æ›´å¼ºï¼Œåœ¨ä½¿ç”¨ç»„ä»¶çš„æ—¶å€™ï¼Œå¯ä»¥åœ¨æ ‡ç­¾ä¸ŠåŠ å±æ€§æ¥ä¼ å…¥é…ç½®å‚æ•°ã€‚
2. ç»„ä»¶å¯ä»¥åœ¨å†…éƒ¨é€šè¿‡ `this.props` è·å–åˆ°é…ç½®å‚æ•°ï¼Œç»„ä»¶å¯ä»¥æ ¹æ® `props`  çš„ä¸åŒæ¥ç¡®å®šè‡ªå·±çš„æ˜¾ç¤ºå½¢æ€ï¼Œè¾¾åˆ°å¯é…ç½®çš„æ•ˆæœã€‚
3. å¯ä»¥é€šè¿‡ç»™ç»„ä»¶æ·»åŠ ç±»å±æ€§ `defaultProps` æ¥é…ç½®é»˜è®¤å‚æ•°ã€‚
4. `props` ä¸€æ—¦ä¼ å…¥ï¼Œä½ å°±ä¸å¯ä»¥åœ¨ç»„ä»¶å†…éƒ¨å¯¹å®ƒè¿›è¡Œä¿®æ”¹ã€‚ä½†æ˜¯ä½ å¯ä»¥é€šè¿‡çˆ¶ç»„ä»¶ä¸»åŠ¨é‡æ–°æ¸²æŸ“çš„æ–¹å¼æ¥ä¼ å…¥æ–°çš„ `props`ï¼Œä»è€Œè¾¾åˆ°æ›´æ–°çš„æ•ˆæœã€‚

{% endraw %}