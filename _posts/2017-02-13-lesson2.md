---
layout: post
title: å‰ç«¯ç»„ä»¶åŒ–ï¼ˆä¸€ï¼‰ï¼šä»ä¸€ä¸ªç®€å•çš„ä¾‹å­è®²èµ·
description: React.js å°ä¹¦æ˜¯ä¸€ä¸ªå¼€æºã€å…è´¹ã€ä¸“ä¸šã€ç®€å•çš„ React.js æ•™ç¨‹ã€‚æœ¬æ–‡æ˜¯ä¸€ä¸ªå…³äºå¦‚ä½•ä½¿ç”¨ React.js å®ç°å‰ç«¯ç»„ä»¶åŒ–çš„æ•™ç¨‹ã€‚é€šè¿‡ä¸€ä¸ªç®€å•çš„ç‚¹èµåŠŸèƒ½ï¼Œè®²è¿°äº†å¦‚ä½•é€šè¿‡ React.js å®ç°ä¸€ä¸ªç®€å•çš„ç»„ä»¶åŒ–ã€‚
tags: [React.js,React.js å°ä¹¦,æ•™ç¨‹,ç»„ä»¶]
---

<ul style='font-size: 14px; margin-top: -10px;'>
  <li>
    ä½œè€…ï¼š<a href="https://www.zhihu.com/people/hu-zi-da-ha" target="_blank">èƒ¡å­å¤§å“ˆ</a>
  </li>
  <li>
    åŸæ–‡é“¾æ¥ï¼š<a href="http://huziketang.com/books/react{{ page.url }}"> http://huziketang.com/books/react{{ page.url }} </a>
  </li>
  <li>è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼Œä¿ç•™åŸæ–‡é“¾æ¥å’Œä½œè€…ä¿¡æ¯ã€‚</li>
</ul>

å¾ˆå¤šè¯¾ç¨‹ä¸€ä¸Šæ¥å°±ç»™å¤§å®¶å¦‚ä½•é…ç½®ç¯å¢ƒã€æ€ä¹ˆå†™ React.js ç»„ä»¶ã€‚ä½†æ˜¯æœ¬è¯¾ç¨‹è¿˜æ˜¯å¸Œæœ›å¤§å®¶å¯¹é—®é¢˜çš„æ ¹æºæœ‰ä¸€ä¸ªæ›´åŠ æ·±å…¥çš„äº†è§£ï¼Œå…¶å®å¾ˆå¤šçš„åº“ã€æ¡†æ¶éƒ½æ˜¯è§£å†³ç±»ä¼¼çš„é—®é¢˜ã€‚åªæœ‰æˆ‘ä»¬å¯¹è¿™äº›åº“ã€æ¡†æ¶è§£å†³çš„é—®é¢˜æœ‰æ·±å…¥çš„äº†è§£å’Œæ€è€ƒä»¥åï¼Œæˆ‘ä»¬æ‰èƒ½å¾—å¿ƒåº”æ‰‹åœ°ä½¿ç”¨å®ƒä»¬ï¼Œå¹¶ä¸”æœ‰æ–°çš„æ¡†æ¶å‡ºæ¥ä¹Ÿä¸ä¼šå¤ªè¿‡è¿·èŒ«ï¼›å› ä¸ºå…¶å®å®ƒä»¬è§£å†³éƒ½æ˜¯åŒä¸€ä¸ªé—®é¢˜ã€‚

è¿™ä¸¤èŠ‚è¯¾æˆ‘ä»¬æ¥æ¢è®¨ä¸€ä¸‹æ˜¯ä»€ä¹ˆæ ·çš„é—®é¢˜å¯¼è‡´äº†æˆ‘ä»¬éœ€è¦å‰ç«¯é¡µé¢è¿›è¡Œç»„ä»¶åŒ–ï¼Œå‰ç«¯é¡µé¢çš„ç»„ä»¶åŒ–éœ€è¦è§£å†³ä»€ä¹ˆæ ·çš„é—®é¢˜ã€‚åç»­è¯¾ç¨‹æˆ‘ä»¬å†æ¥çœ‹çœ‹ React.js æ˜¯æ€ä¹ˆè§£å†³è¿™äº›é—®é¢˜çš„ã€‚

æ‰€ä»¥è¿™å‡ èŠ‚æ‰€è®²çš„å†…å®¹å°†å’Œ React.js çš„å†…å®¹æ²¡æœ‰å¤ªå¤§çš„å…³ç³»ï¼Œä½†æ˜¯å¦‚æœä½ èƒ½é¡ºåˆ©äº†è§£è¿™å‡ èŠ‚çš„å†…å®¹ï¼Œé‚£ä¹ˆåé¢å“ªäº›å¯¹æ–°æ‰‹æ¥è¯´å¾ˆå¤æ‚çš„æ¦‚å¿µå¯¹ä½ æ¥è¯´å°±æ˜¯éå¸¸è‡ªç„¶çš„äº‹ã€‚

## ä¸€ä¸ªç®€å•çš„ç‚¹èµåŠŸèƒ½
æˆ‘ä»¬ä¼šä»ä¸€ä¸ªç®€å•çš„ç‚¹èµåŠŸèƒ½è®²èµ·ã€‚ å‡è®¾ç°åœ¨æˆ‘ä»¬éœ€è¦å®ç°ä¸€ä¸ªç‚¹èµã€å–æ¶ˆç‚¹èµçš„åŠŸèƒ½ã€‚

<a href="http://huzidaha.github.io/static/assets/img/posts/B7575C67-64F8-4A13-9C63-4D6805FA360D.png" target="_blank">![React.js ç»„ä»¶åŒ–å›¾ç‰‡](http://huzidaha.github.io/static/assets/img/posts/B7575C67-64F8-4A13-9C63-4D6805FA360D.png)</a>

å¦‚æœä½ å¯¹å‰ç«¯ç¨å¾®æœ‰ä¸€ç‚¹äº†è§£ï¼Œä½ å°±é¡ºæ‰‹æ‹ˆæ¥ï¼š

HTML:
```javascript
  <body>
    <div class='wrapper'>
      <button class='like-btn'>
        <span class='like-text'>ç‚¹èµ</span>
        <span>ğŸ‘</span>
      </button>
    </div>
  </body>
```

ä¸ºäº†æ¨¡æ‹Ÿç°å®å½“ä¸­çš„å®é™…æƒ…å†µï¼Œæ‰€ä»¥è¿™é‡Œç‰¹æ„æŠŠè¿™ä¸ª `button` é‡Œé¢çš„ HTML ç»“æ„æå¾—ç¨å¾®å¤æ‚ä¸€äº›ã€‚æœ‰äº†è¿™ä¸ª HTML ç»“æ„ï¼Œç°åœ¨å°±ç»™å®ƒåŠ å…¥ä¸€äº› JavaScript çš„è¡Œä¸ºï¼š

JavaScriptï¼š
```javascript
  const button = document.querySelector('.like-btn')
  const buttonText = button.querySelector('.like-text')
  let isLiked = false
  button.addEventListener('click', () => {
    isLiked = !isLiked
    if (isLiked) {
      buttonText.innerHTML = 'å–æ¶ˆ'
    } else {
      buttonText.innerHTML = 'ç‚¹èµ'
    }
  }, false)
```

åŠŸèƒ½å’Œå®ç°éƒ½å¾ˆç®€å•ï¼ŒæŒ‰é’®å·²ç»å¯ä»¥æä¾›ç‚¹èµå’Œå–æ¶ˆç‚¹èµçš„åŠŸèƒ½ã€‚è¿™æ—¶å€™ä½ çš„åŒäº‹è·‘è¿‡æ¥äº†ï¼Œè¯´ä»–å¾ˆå–œæ¬¢ä½ çš„æŒ‰é’®ï¼Œä»–ä¹Ÿæƒ³ç”¨ä½ å†™çš„è¿™ä¸ªç‚¹èµåŠŸèƒ½ã€‚è¿™æ—¶å€™é—®é¢˜å°±æ¥äº†ï¼Œä½ å°±ä¼šå‘ç°è¿™ç§å®ç°æ–¹å¼å¾ˆè‡´å‘½ï¼šä½ çš„åŒäº‹è¦æŠŠæ•´ä¸ª  `button`  å’Œé‡Œé¢çš„ç»“æ„å¤åˆ¶è¿‡å»ï¼Œè¿˜æœ‰æ•´æ®µ JavaScript ä»£ç ä¹Ÿè¦å¤åˆ¶è¿‡å»ã€‚è¿™æ ·çš„å®ç°æ–¹å¼æ²¡æœ‰ä»»ä½•å¯å¤ç”¨æ€§ã€‚

## ç»“æ„å¤ç”¨
ç°åœ¨æˆ‘ä»¬æ¥é‡æ–°ç¼–å†™è¿™ä¸ªç‚¹èµåŠŸèƒ½ï¼Œè®©å®ƒå…·å¤‡ä¸€å®šçš„å¯å¤ç”¨ã€‚è¿™æ¬¡æˆ‘ä»¬å…ˆå†™ä¸€ä¸ªç±»ï¼Œè¿™ä¸ªç±»æœ‰ render æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•é‡Œé¢ç›´æ¥è¿”å›ä¸€ä¸ªè¡¨ç¤º HTML ç»“æ„çš„å­—ç¬¦ä¸²ï¼š

```javascript
  class LikeButton {
    render () {
      return `
        <button id='like-btn'>
          <span class='like-text'>èµ</span>
          <span>ğŸ‘</span>
        </button>
      `
    }
  }
```

ç„¶åå¯ä»¥ç”¨è¿™ä¸ªç±»æ¥æ„å»ºä¸åŒçš„ç‚¹èµåŠŸèƒ½çš„å®ä¾‹ï¼Œç„¶åæŠŠå®ƒä»¬æ’åˆ°é¡µé¢ä¸­ã€‚

```javascript
  const wrapper = document.querySelector('.wrapper')
  const likeButton1 = new LikeButton()
  wrapper.innerHTML = likeButton1.render()
  
  const likeButton2 = new LikeButton()
  wrapper.innerHTML += likeButton2.render()
```

<a href="http://huzidaha.github.io/static/assets/img/posts/B7575C67-64F8-4A13-9C63-4D6805FA360D.png" target="_blank">![React.js ç»„ä»¶åŒ–å›¾ç‰‡](http://huzidaha.github.io/static/assets/img/posts/B7575C67-64F8-4A13-9C63-4D6805FA360D.png)</a>

è¿™é‡Œéå¸¸æš´åŠ›åœ°ä½¿ç”¨äº† innerHTML ï¼ŒæŠŠä¸¤ä¸ªæŒ‰é’®ç²—é²åœ°æ’å…¥äº† wrapper å½“ä¸­ã€‚è™½ç„¶ä½ å¯èƒ½ä¼šå¯¹è¿™ç§å®ç°æ–¹å¼éå¸¸ä¸æ»¡æ„ï¼Œä½†æˆ‘ä»¬è¿˜æ˜¯å‹‰å¼ºäº†å®ç°äº†ç»“æ„çš„å¤ç”¨ã€‚æˆ‘ä»¬åé¢å†æ¥ä¼˜åŒ–å®ƒã€‚

## å®ç°ç®€å•çš„ç»„ä»¶åŒ–
ä½ ä¸€å®šä¼šå‘ç°ï¼Œç°åœ¨çš„æŒ‰é’®æ˜¯æ­»çš„ï¼Œä½ ç‚¹å‡»å®ƒå®ƒæ ¹æœ¬ä¸ä¼šæœ‰ä»€ä¹ˆååº”ã€‚å› ä¸ºæ ¹æœ¬æ²¡æœ‰å¾€ä¸Šé¢æ·»åŠ äº‹ä»¶ã€‚ä½†æ˜¯é—®é¢˜æ¥äº†ï¼Œ`LikeButton`  ç±»é‡Œé¢æ˜¯è™½ç„¶è¯´æœ‰ä¸€ä¸ª  `button`ï¼Œä½†æ˜¯è¿™ç©æ„æ ¹æœ¬å°±æ˜¯åœ¨å­—ç¬¦ä¸²é‡Œé¢çš„ã€‚ä½ æ€ä¹ˆèƒ½å¾€ä¸€ä¸ªå­—ç¬¦ä¸²é‡Œé¢æ·»åŠ äº‹ä»¶å‘¢ï¼ŸDOM äº‹ä»¶çš„ API åªæœ‰ DOM ç»“æ„æ‰èƒ½ç”¨ã€‚

æˆ‘ä»¬éœ€è¦ DOM ç»“æ„ï¼Œå‡†ç¡®åœ°æ¥è¯´ï¼š*æˆ‘ä»¬éœ€è¦è¿™ä¸ªç‚¹èµåŠŸèƒ½çš„ HTML å­—ç¬¦ä¸²è¡¨ç¤ºçš„ DOM ç»“æ„*ã€‚å‡è®¾æˆ‘ä»¬ç°åœ¨æœ‰ä¸€ä¸ªå‡½æ•°  `createDOMFromString` ï¼Œä½ å¾€è¿™ä¸ªå‡½æ•°ä¼ å…¥ HTML å­—ç¬¦ä¸²ï¼Œä½†æ˜¯å®ƒä¼šæŠŠç›¸åº”çš„ DOM å…ƒç´ è¿”å›ç»™ä½ ã€‚è¿™ä¸ªé—®é¢˜å°±å¯ä»¥é¢è§£å†³äº†ã€‚

```javascript
// ::String => ::Document
const createDOMFromString = (domString) => {
  const div = document.createElement('div')
  div.innerHTML = domString
  return div
}
```

å…ˆä¸ç”¨ç®¡è¿™ä¸ªå‡½æ•°åº”è¯¥æ€ä¹ˆå®ç°ï¼Œå…ˆçŸ¥é“å®ƒæ˜¯å¹²å˜›çš„ã€‚æ‹¿æ¥ç”¨å°±å¥½ï¼Œè¿™æ—¶å€™ç”¨å®ƒæ¥æ”¹å†™ä¸€ä¸‹ `LikeButton` ç±»ï¼š

```javascript
  class LikeButton {
    render () {
      this.el = createDOMFromString(`
        <button class='like-button'>
          <span class='like-text'>ç‚¹èµ</span>
          <span>ğŸ‘</span>
        </button>
      `)
      this.el.addEventListener('click', () => console.log('click'), false)
      return this.el
    }
  }
```

ç°åœ¨  `render()` è¿”å›çš„ä¸æ˜¯ä¸€ä¸ª html å­—ç¬¦ä¸²äº†ï¼Œè€Œæ˜¯ä¸€ä¸ªç”±è¿™ä¸ª html å­—ç¬¦ä¸²æ‰€ç”Ÿæˆçš„ DOMã€‚åœ¨è¿”å› DOM å…ƒç´ ä¹‹å‰ä¼šå…ˆç»™è¿™ä¸ª DOM å…ƒç´ ä¸Šæ·»åŠ äº‹ä»¶å†è¿”å›ã€‚

å› ä¸ºç°åœ¨ `render` è¿”å›çš„æ˜¯ DOM å…ƒç´ ï¼Œæ‰€ä»¥ä¸èƒ½ç”¨ `innerHTML` æš´åŠ›åœ°æ’å…¥ wrapperã€‚è€Œæ˜¯è¦ç”¨ DOM API æ’è¿›å»ã€‚

```javascript
  const wrapper = document.querySelector('.wrapper')

  const likeButton1 = new LikeButton()
  wrapper.appendChild(likeButton1.render())

  const likeButton2 = new LikeButton()
  wrapper.appendChild(likeButton2.render())
```

ç°åœ¨ä½ ç‚¹å‡»è¿™ä¸¤ä¸ªæŒ‰é’®ï¼Œæ¯ä¸ªæŒ‰é’®éƒ½ä¼šåœ¨æ§åˆ¶å°æ‰“å° `click`ï¼Œè¯´æ˜äº‹ä»¶ç»‘å®šæˆåŠŸäº†ã€‚ä½†æ˜¯æŒ‰é’®ä¸Šçš„æ–‡æœ¬è¿˜æ˜¯æ²¡æœ‰å‘ç”Ÿæ”¹å˜ï¼Œåªè¦ç¨å¾®æ”¹åŠ¨ä¸€ä¸‹ `LikeButton` çš„ä»£ç å°±å¯ä»¥å®Œæˆå®Œæ•´çš„åŠŸèƒ½ï¼š

```javascript
  class LikeButton {
    constructor () {
      this.state = { isLiked: false }
    }

    changeLikeText () {
      const likeText = this.el.querySelector('.like-text')
      this.state.isLiked = !this.state.isLiked
      likeText.innerHTML = this.state.isLiked ? 'å–æ¶ˆ' : 'ç‚¹èµ'
    }

    render () {
      this.el = createDOMFromString(`
        <button class='like-button'>
          <span class='like-text'>ç‚¹èµ</span>
          <span>ğŸ‘</span>
        </button>
      `)
      this.el.addEventListener('click', this.changeLikeText.bind(this), false)
      return this.el
    }
  }
```

è¿™é‡Œçš„ä»£ç ç¨å¾®é•¿äº†ä¸€äº›ï¼Œä½†æ˜¯è¿˜æ˜¯å¾ˆå¥½ç†è§£ã€‚åªä¸è¿‡æ˜¯åœ¨ç»™ `LikeButton` ç±»æ·»åŠ äº†æ„é€ å‡½æ•°ï¼Œè¿™ä¸ªæ„é€ å‡½æ•°ä¼šç»™æ¯ä¸€ä¸ª `LikeButton` çš„å®ä¾‹æ·»åŠ ä¸€ä¸ªå¯¹è±¡ `state`ï¼Œ`state` é‡Œé¢ä¿å­˜äº†æ¯ä¸ªæŒ‰é’®è‡ªå·±æ˜¯å¦ç‚¹èµçš„çŠ¶æ€ã€‚è¿˜æ”¹å†™äº†åŸæ¥çš„äº‹ä»¶ç»‘å®šå‡½æ•°ï¼šåŸæ¥åªæ‰“å°  `click`ï¼Œç°åœ¨ç‚¹å‡»çš„æŒ‰é’®çš„æ—¶å€™ä¼šè°ƒç”¨  `changeLikeText` æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•ä¼šæ ¹æ® `this.state` çš„çŠ¶æ€æ”¹å˜ç‚¹èµæŒ‰é’®çš„æ–‡æœ¬ã€‚

ç°åœ¨è¿™ä¸ªç»„ä»¶çš„å¯å¤ç”¨æ€§å·²ç»å¾ˆä¸é”™äº†ï¼Œä½ çš„åŒäº‹ä»¬åªè¦å®ä¾‹åŒ–ä¸€ä¸‹ç„¶åæ’å…¥åˆ° DOM é‡Œé¢å»å°±å¥½äº†ã€‚

ä¸‹ä¸€èŠ‚æˆ‘ä»¬ç»§ç»­ä¼˜åŒ–è¿™ä¸ªä¾‹å­ï¼Œè®©å®ƒæ›´åŠ é€šç”¨ã€‚

* * *

> å› ä¸ºç¬¬ä¸‰æ–¹è¯„è®ºå·¥å…·æœ‰é—®é¢˜ï¼Œå¯¹æœ¬ç« èŠ‚æœ‰ä»»ä½•ç–‘é—®çš„æœ‹å‹å¯ä»¥ç§»æ­¥åˆ° <a target="_blank" href="http://scriptoj.com/category/4/react-js-å°ä¹¦äº¤æµåŒº">React.js å°ä¹¦çš„è®ºå›</a> å‘å¸–ï¼Œæˆ‘ä¼šå›ç­”å¤§å®¶çš„ç–‘é—®ã€‚
